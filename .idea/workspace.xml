<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AutoImportSettings">
    <option name="autoReloadType" value="SELECTIVE" />
  </component>
  <component name="ChangeListManager">
    <list default="true" id="7e1a5cf2-d893-489c-bc94-af214a6f7d61" name="Changes" comment="refactor(ai): modularize prompt construction and history formatting&#10;- Added `format_history` to process recent chat context (last 10 messages).&#10;- Refactored `build_chat_messages` to accept pre-fetched profile and workout data.&#10;- Implemented `model_dump(include=...)` for cleaner data extraction from models.&#10;- Improved prompt structure by separating System Persona and User context.">
      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/app/prompts/Current_Context.txt" beforeDir="false" afterPath="$PROJECT_DIR$/app/prompts/Current_Context.txt" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/app/services/ai_coach.py" beforeDir="false" afterPath="$PROJECT_DIR$/app/services/ai_coach.py" afterDir="false" />
    </list>
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="ChangesViewManager">
    <option name="groupingKeys">
      <option value="directory" />
    </option>
  </component>
  <component name="FileTemplateManagerImpl">
    <option name="RECENT_TEMPLATES">
      <list>
        <option value="Python Script" />
        <option value="HTML File" />
      </list>
    </option>
  </component>
  <component name="Git.Settings">
    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
  </component>
  <component name="GitHubPullRequestSearchHistory">{
  &quot;lastFilter&quot;: {
    &quot;state&quot;: &quot;OPEN&quot;,
    &quot;assignee&quot;: &quot;ripGoGa&quot;
  }
}</component>
  <component name="GithubPullRequestsUISettings">{
  &quot;selectedUrlAndAccountId&quot;: {
    &quot;url&quot;: &quot;https://github.com/ripGoGa/mypet.git&quot;,
    &quot;accountId&quot;: &quot;ef9782e7-bf69-4415-830d-63abc4c81e10&quot;
  }
}</component>
  <component name="ProblemsViewState">
    <option name="selectedTabId" value="CurrentFile" />
  </component>
  <component name="ProjectColorInfo">{
  &quot;associatedIndex&quot;: 0
}</component>
  <component name="ProjectId" id="33CSJO31iAz19HPNjPZdoekd4cn" />
  <component name="ProjectLevelVcsManager" settingsEditedManually="true">
    <ConfirmationsSetting value="2" id="Add" />
  </component>
  <component name="ProjectViewState">
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="showLibraryContents" value="true" />
  </component>
  <component name="PropertiesComponent">{
  &quot;keyToString&quot;: {
    &quot;ASKED_ADD_EXTERNAL_FILES&quot;: &quot;true&quot;,
    &quot;DefaultHtmlFileTemplate&quot;: &quot;HTML File&quot;,
    &quot;Python.file_validator.executor&quot;: &quot;Run&quot;,
    &quot;Python.parse_cvs.executor&quot;: &quot;Run&quot;,
    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,
    &quot;git-widget-placeholder&quot;: &quot;main&quot;,
    &quot;ignore.virus.scanning.warn.message&quot;: &quot;true&quot;,
    &quot;last_opened_file_path&quot;: &quot;C:/Users/1/Documents/mypet&quot;,
    &quot;settings.editor.selected.configurable&quot;: &quot;project.propVCSSupport.Mappings&quot;
  }
}</component>
  <component name="RecentsManager">
    <key name="MoveFile.RECENT_KEYS">
      <recent name="$PROJECT_DIR$/app/models" />
    </key>
  </component>
  <component name="SharedIndexes">
    <attachedChunks>
      <set>
        <option value="bundled-python-sdk-babbdf50b680-746f403e7f0c-com.jetbrains.pycharm.community.sharedIndexes.bundled-PC-241.15989.155" />
      </set>
    </attachedChunks>
  </component>
  <component name="SpellCheckerSettings" RuntimeDictionaries="0" Folders="0" CustomDictionaries="0" DefaultDictionary="application-level" UseSingleDictionary="true" transferred="true" />
  <component name="TaskManager">
    <task active="true" id="Default" summary="Default task">
      <changelist id="7e1a5cf2-d893-489c-bc94-af214a6f7d61" name="Changes" comment="" />
      <created>1758819487803</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1758819487803</updated>
    </task>
    <task id="LOCAL-00001" summary="Create project structure and requirements">
      <option name="closed" value="true" />
      <created>1758821525754</created>
      <option name="number" value="00001" />
      <option name="presentableId" value="LOCAL-00001" />
      <option name="project" value="LOCAL" />
      <updated>1758821525754</updated>
    </task>
    <task id="LOCAL-00002" summary="Create project structure and requirements">
      <option name="closed" value="true" />
      <created>1758821683905</created>
      <option name="number" value="00002" />
      <option name="presentableId" value="LOCAL-00002" />
      <option name="project" value="LOCAL" />
      <updated>1758821683905</updated>
    </task>
    <task id="LOCAL-00003" summary="add workouts route and template with table">
      <option name="closed" value="true" />
      <created>1759138390634</created>
      <option name="number" value="00003" />
      <option name="presentableId" value="LOCAL-00003" />
      <option name="project" value="LOCAL" />
      <updated>1759138390634</updated>
    </task>
    <task id="LOCAL-00004" summary="add imports route and test file upload">
      <option name="closed" value="true" />
      <created>1759255667286</created>
      <option name="number" value="00004" />
      <option name="presentableId" value="LOCAL-00004" />
      <option name="project" value="LOCAL" />
      <updated>1759255667286</updated>
    </task>
    <task id="LOCAL-00005" summary="add CSV upload and save file by hash with validation">
      <option name="closed" value="true" />
      <created>1759430065131</created>
      <option name="number" value="00005" />
      <option name="presentableId" value="LOCAL-00005" />
      <option name="project" value="LOCAL" />
      <updated>1759430065131</updated>
    </task>
    <task id="LOCAL-00006" summary="add storage for upload workouts, show recent uploads in workouts page">
      <option name="closed" value="true" />
      <created>1759518201578</created>
      <option name="number" value="00006" />
      <option name="presentableId" value="LOCAL-00006" />
      <option name="project" value="LOCAL" />
      <updated>1759518201578</updated>
    </task>
    <task id="LOCAL-00007" summary="add navigation button on index, workouts, imports pages">
      <option name="closed" value="true" />
      <created>1759668118907</created>
      <option name="number" value="00007" />
      <option name="presentableId" value="LOCAL-00007" />
      <option name="project" value="LOCAL" />
      <updated>1759668118907</updated>
    </task>
    <task id="LOCAL-00008" summary="add success and error message with PRG">
      <option name="closed" value="true" />
      <created>1759672141204</created>
      <option name="number" value="00008" />
      <option name="presentableId" value="LOCAL-00008" />
      <option name="project" value="LOCAL" />
      <updated>1759672141204</updated>
    </task>
    <task id="LOCAL-00009" summary="Create SQLite setup and db engine with SQLModel">
      <option name="closed" value="true" />
      <created>1759690385464</created>
      <option name="number" value="00009" />
      <option name="presentableId" value="LOCAL-00009" />
      <option name="project" value="LOCAL" />
      <updated>1759690385464</updated>
    </task>
    <task id="LOCAL-00010" summary="Create models for UploadedFile and Workout">
      <option name="closed" value="true" />
      <created>1759774948613</created>
      <option name="number" value="00010" />
      <option name="presentableId" value="LOCAL-00010" />
      <option name="project" value="LOCAL" />
      <updated>1759774948613</updated>
    </task>
    <task id="LOCAL-00011" summary="Prep for refactoring: created separate 'services' folder and added 'file_validator' function">
      <option name="closed" value="true" />
      <created>1759864560089</created>
      <option name="number" value="00011" />
      <option name="presentableId" value="LOCAL-00011" />
      <option name="project" value="LOCAL" />
      <updated>1759864560089</updated>
    </task>
    <task id="LOCAL-00012" summary="created 'save_file_with_hash' function">
      <option name="closed" value="true" />
      <created>1759945897476</created>
      <option name="number" value="00012" />
      <option name="presentableId" value="LOCAL-00012" />
      <option name="project" value="LOCAL" />
      <updated>1759945897477</updated>
    </task>
    <task id="LOCAL-00013" summary="deleted datatime from 'save_file_with_hash' and refactor @app.post('/imports')">
      <option name="closed" value="true" />
      <created>1759947792462</created>
      <option name="number" value="00013" />
      <option name="presentableId" value="LOCAL-00013" />
      <option name="project" value="LOCAL" />
      <updated>1759947792462</updated>
    </task>
    <task id="LOCAL-00014" summary="The save_file_with_hash function has been improved: it now checks for duplicates. Route /import is connected to the database. A table has been created in the database">
      <option name="closed" value="true" />
      <created>1760032760493</created>
      <option name="number" value="00014" />
      <option name="presentableId" value="LOCAL-00014" />
      <option name="project" value="LOCAL" />
      <updated>1760032760493</updated>
    </task>
    <task id="LOCAL-00015" summary="The stub has been removed from the list_workouts function in the @app.get('/workouts')  route. function connected to the UploadedFile, modified template list_workouts.html">
      <option name="closed" value="true" />
      <created>1760035769813</created>
      <option name="number" value="00015" />
      <option name="presentableId" value="LOCAL-00015" />
      <option name="project" value="LOCAL" />
      <updated>1760035769813</updated>
    </task>
    <task id="LOCAL-00016" summary="Add database relationships between UploadedFile and Workout model">
      <option name="closed" value="true" />
      <created>1760121051506</created>
      <option name="number" value="00016" />
      <option name="presentableId" value="LOCAL-00016" />
      <option name="project" value="LOCAL" />
      <updated>1760121051506</updated>
    </task>
    <task id="LOCAL-00017" summary="Add SQL model UserProfile and update Workout model">
      <option name="closed" value="true" />
      <created>1760208015861</created>
      <option name="number" value="00017" />
      <option name="presentableId" value="LOCAL-00017" />
      <option name="project" value="LOCAL" />
      <updated>1760208015861</updated>
    </task>
    <task id="LOCAL-00018" summary="Add first parse_cvs service">
      <option name="closed" value="true" />
      <created>1760292676429</created>
      <option name="number" value="00018" />
      <option name="presentableId" value="LOCAL-00018" />
      <option name="project" value="LOCAL" />
      <updated>1760292676429</updated>
    </task>
    <task id="LOCAL-00019" summary="Upgrade parse_cvs: add moving_mask, calories and moving metrics">
      <option name="closed" value="true" />
      <created>1760359670081</created>
      <option name="number" value="00019" />
      <option name="presentableId" value="LOCAL-00019" />
      <option name="project" value="LOCAL" />
      <updated>1760359670081</updated>
    </task>
    <task id="LOCAL-00020" summary="Upgrade Workout model">
      <option name="closed" value="true" />
      <created>1760360010227</created>
      <option name="number" value="00020" />
      <option name="presentableId" value="LOCAL-00020" />
      <option name="project" value="LOCAL" />
      <updated>1760360010227</updated>
    </task>
    <task id="LOCAL-00021" summary="Upgrade Workout model again xD. Preparation for an atomic write operation in the database">
      <option name="closed" value="true" />
      <created>1760366693858</created>
      <option name="number" value="00021" />
      <option name="presentableId" value="LOCAL-00021" />
      <option name="project" value="LOCAL" />
      <updated>1760366693858</updated>
    </task>
    <task id="LOCAL-00022" summary="Update UserProfile model, add get'/profile' route to display user profile">
      <option name="closed" value="true" />
      <created>1760808978099</created>
      <option name="number" value="00022" />
      <option name="presentableId" value="LOCAL-00022" />
      <option name="project" value="LOCAL" />
      <updated>1760808978099</updated>
    </task>
    <task id="LOCAL-00023" summary="Create template profile.html">
      <option name="closed" value="true" />
      <created>1760967130667</created>
      <option name="number" value="00023" />
      <option name="presentableId" value="LOCAL-00023" />
      <option name="project" value="LOCAL" />
      <updated>1760967130667</updated>
    </task>
    <task id="LOCAL-00024" summary="add Get route for profile creation form">
      <option name="closed" value="true" />
      <created>1760969990748</created>
      <option name="number" value="00024" />
      <option name="presentableId" value="LOCAL-00024" />
      <option name="project" value="LOCAL" />
      <updated>1760969990748</updated>
    </task>
    <task id="LOCAL-00025" summary="Fixed parse_csv_to_workout to correctly associate Workout with UploadedFile: removed file_path from Relationship">
      <option name="closed" value="true" />
      <created>1760973361083</created>
      <option name="number" value="00025" />
      <option name="presentableId" value="LOCAL-00025" />
      <option name="project" value="LOCAL" />
      <updated>1760973361083</updated>
    </task>
    <task id="LOCAL-00026" summary="Feature: Add workouts list page with pagination&#10;&#10;- Created GET /workouts with pagination support (10 workouts per page)&#10;- Added a total page count&#10;- Implemented sorting by ID (newest on top)&#10;- Created a workouts.html template with a workout table&#10;- Added navigation between pages (Previous/Next)">
      <option name="closed" value="true" />
      <created>1761567395269</created>
      <option name="number" value="00026" />
      <option name="presentableId" value="LOCAL-00026" />
      <option name="project" value="LOCAL" />
      <updated>1761567395269</updated>
    </task>
    <task id="LOCAL-00027" summary="fix: handle missing heartrate and cadence in CSV import&#10;&#10;- Add get_metric_or_none() helper function&#10;- Make heartrate and cadence fields optional&#10;- Prevent crashes on incomplete workout data">
      <option name="closed" value="true" />
      <created>1761673726912</created>
      <option name="number" value="00027" />
      <option name="presentableId" value="LOCAL-00027" />
      <option name="project" value="LOCAL" />
      <updated>1761673726912</updated>
    </task>
    <task id="LOCAL-00028" summary="feat: add workout detail page&#10;&#10;- Created GET /workouts/{workout_id} for detailed view of workout&#10;- Added workout_detail.html template.&#10;- All metrics are shown: power, heart rate, cadence, speed, calories&#10;- Missing data handling (heart rate, cadence)&#10;- Back to list navigation added">
      <option name="closed" value="true" />
      <created>1761752857578</created>
      <option name="number" value="00028" />
      <option name="presentableId" value="LOCAL-00028" />
      <option name="project" value="LOCAL" />
      <updated>1761752857578</updated>
    </task>
    <task id="LOCAL-00029" summary="Progress: Created the OllamaService class, added asyncgenerate() for Ollama LLM integration.&#10;&#10;- Implemented the asynchronous generate() function for communicating with the local LLM via the Ollama API.&#10;- Handling connection and timeout errors.">
      <option name="closed" value="true" />
      <created>1762181941985</created>
      <option name="number" value="00029" />
      <option name="presentableId" value="LOCAL-00029" />
      <option name="project" value="LOCAL" />
      <updated>1762181941985</updated>
    </task>
    <task id="LOCAL-00030" summary="Feature: Add format_workouts() for AI coach&#10;&#10;- Implemented the format_workouts() function for converting workouts to text.&#10;- Format: compact strings with key metrics (distance, TSS, power, NP, IF).&#10;- Conditional display of heart rate and cadence (if data is available).&#10;- The user can select the number of workouts to analyze.">
      <option name="closed" value="true" />
      <created>1762785914885</created>
      <option name="number" value="00030" />
      <option name="presentableId" value="LOCAL-00030" />
      <option name="project" value="LOCAL" />
      <updated>1762785914885</updated>
    </task>
    <task id="LOCAL-00031" summary="feat: add OllamaService with AI coach integration&#10;&#10;- Implement generate() for LLM communication&#10;- Add format_workouts() for workout formatting&#10;- Add get_training_advice() to get AI recommendations&#10;- Handle connection errors and timeouts">
      <option name="closed" value="true" />
      <created>1762792916859</created>
      <option name="number" value="00031" />
      <option name="presentableId" value="LOCAL-00031" />
      <option name="project" value="LOCAL" />
      <updated>1762792916859</updated>
    </task>
    <task id="LOCAL-00032" summary="feat: implement AI coach UI&#10;&#10;- Add GET /coach and POST /coach/advice routes&#10;- Add coach.html form and advice.html result page&#10;- User can select number of workouts to analyze&#10;- Call OllamaService to generate recommendations">
      <option name="closed" value="true" />
      <created>1762797933431</created>
      <option name="number" value="00032" />
      <option name="presentableId" value="LOCAL-00032" />
      <option name="project" value="LOCAL" />
      <updated>1762797933431</updated>
    </task>
    <task id="LOCAL-00033" summary="feat: add AI coach with Ollama integration&#10;&#10;- Implement OllamaService (generate, format_workouts, get_training_advice)&#10;- Add GET /coach and POST /coach/advice routes&#10;- Create coach.html form and advice.html result page&#10;- User selects number of workouts to analyze (1-20)&#10;- Fixed stream mode issue (stream=false)">
      <option name="closed" value="true" />
      <created>1763051036270</created>
      <option name="number" value="00033" />
      <option name="presentableId" value="LOCAL-00033" />
      <option name="project" value="LOCAL" />
      <updated>1763051036270</updated>
    </task>
    <task id="LOCAL-00034" summary="feat: add ChatMessage model and UserProfile relationship&#10;&#10;- Add ChatMessage model (user_id, role, content, created_at)&#10;- Update UserProfile with messages relationship (back_populates)&#10;- Prepare database schema for persistent AI chat history&#10;- Define foreign key constraints for user-message linking">
      <option name="closed" value="true" />
      <created>1765275025570</created>
      <option name="number" value="00034" />
      <option name="presentableId" value="LOCAL-00034" />
      <option name="project" value="LOCAL" />
      <updated>1765275025570</updated>
    </task>
    <task id="LOCAL-00035" summary="feat: add chat method to OllamaService">
      <option name="closed" value="true" />
      <created>1765276767473</created>
      <option name="number" value="00035" />
      <option name="presentableId" value="LOCAL-00035" />
      <option name="project" value="LOCAL" />
      <updated>1765276767473</updated>
    </task>
    <task id="LOCAL-00036" summary="feat: implement get_chat_response with full history context">
      <option name="closed" value="true" />
      <created>1765363468428</created>
      <option name="number" value="00036" />
      <option name="presentableId" value="LOCAL-00036" />
      <option name="project" value="LOCAL" />
      <updated>1765363468428</updated>
    </task>
    <task id="LOCAL-00037" summary="refactor: GET/coach, preparation for creating an AI chat">
      <option name="closed" value="true" />
      <created>1765373423228</created>
      <option name="number" value="00037" />
      <option name="presentableId" value="LOCAL-00037" />
      <option name="project" value="LOCAL" />
      <updated>1765373423228</updated>
    </task>
    <task id="LOCAL-00038" summary="feat: implement chat persistence with message history&#10;- Add POST /coach/chat route to handle user messages&#10;- Save user questions and AI responses to ChatMessage table&#10;- Update GET /coach to load chat history from database&#10;- Integrate OllamaService.get_chat_response for contextual replies&#10;- Use Post-Redirect-Get pattern to prevent form resubmission">
      <option name="closed" value="true" />
      <created>1765533576222</created>
      <option name="number" value="00038" />
      <option name="presentableId" value="LOCAL-00038" />
      <option name="project" value="LOCAL" />
      <updated>1765533576222</updated>
    </task>
    <task id="LOCAL-00039" summary="feat: implement chat UI with message history and input form&#10;&#10;- Create app/templates/coach.html template&#10;- Implement Jinja2 loop for rendering chat history&#10;- Add HTML form for submitting user questions to /coach/chat">
      <option name="closed" value="true" />
      <created>1766638982912</created>
      <option name="number" value="00039" />
      <option name="presentableId" value="LOCAL-00039" />
      <option name="project" value="LOCAL" />
      <updated>1766638982913</updated>
    </task>
    <task id="LOCAL-00040" summary="refactor(templates): extract base layout with navigation&#10;&#10;- Create app/templates/base.html with common structure and navigation&#10;- Update app/templates/coach.html to extend base.html&#10;- Fix JavaScript syntax for loading indicator in coach.html">
      <option name="closed" value="true" />
      <created>1766748486386</created>
      <option name="number" value="00040" />
      <option name="presentableId" value="LOCAL-00040" />
      <option name="project" value="LOCAL" />
      <updated>1766748486386</updated>
    </task>
    <task id="LOCAL-00041" summary="refactor(templates): implement navigation in base layout&#10;&#10;- Update base.html with shared navigation&#10;- Update all templates to inherit from base">
      <option name="closed" value="true" />
      <created>1766809196646</created>
      <option name="number" value="00041" />
      <option name="presentableId" value="LOCAL-00041" />
      <option name="project" value="LOCAL" />
      <updated>1766809196646</updated>
    </task>
    <task id="LOCAL-00042" summary="feat(ai): add system persona promt and create prompts directory&#10;&#10;-Created a dedicated directory for AI prompts and added the initial System_Persona.txt file to separate coaching logic from the application code.">
      <option name="closed" value="true" />
      <created>1767698603729</created>
      <option name="number" value="00042" />
      <option name="presentableId" value="LOCAL-00042" />
      <option name="project" value="LOCAL" />
      <updated>1767698603729</updated>
    </task>
    <task id="LOCAL-00043" summary="feat(ai): integrate dynamic system persona template&#10;-Added System_Persona.txt to separate coaching instructions from the logic.&#10;-Implemented _load_system_prompt in OllamaService to read the template from the file system.&#10;-Updated __init__ to cache the system persona template at startup for better performance.&#10;-Refactored get_chat_response to inject dynamic values (like sport type) into the system message.">
      <option name="closed" value="true" />
      <created>1767774011234</created>
      <option name="number" value="00043" />
      <option name="presentableId" value="LOCAL-00043" />
      <option name="project" value="LOCAL" />
      <updated>1767774011234</updated>
    </task>
    <task id="LOCAL-00044" summary="feat(db): implement AthleteProfile and establish 1-to-1 relationship&#10;-Created AthleteProfile table to store dynamic fitness metrics separately from core user data.&#10;-Linked AthleteProfile to UserProfile using a shared primary key (Foreign Key).&#10;-Updated UserProfile to include a relationship back to AthleteProfile.">
      <option name="closed" value="true" />
      <created>1767776116633</created>
      <option name="number" value="00044" />
      <option name="presentableId" value="LOCAL-00044" />
      <option name="project" value="LOCAL" />
      <updated>1767776116633</updated>
    </task>
    <task id="LOCAL-00045" summary="feat(ai): implement modular prompts and simplify athlete profile&#10;- Created User_Profile.txt and Current_Context.txt for modular prompt engineering.&#10;- Refactored AthleteProfile in models.py to focus on core metrics (FTP, weight, limitations).&#10;- Synchronized template placeholders with database field names for automated formatting.">
      <option name="closed" value="true" />
      <created>1767864099698</created>
      <option name="number" value="00045" />
      <option name="presentableId" value="LOCAL-00045" />
      <option name="project" value="LOCAL" />
      <updated>1767864099698</updated>
    </task>
    <task id="LOCAL-00046" summary="feat(ai): refactor prompt loading into a reusable static method&#10;- Unified prompt loading logic into a single static method `_load_prompt`.&#10;- Updated OllamaService to load multiple template parts: System Persona, User Profile, and Current Context.&#10;- Prepared the infrastructure for dynamic prompt assembly using athlete data from the database.">
      <option name="closed" value="true" />
      <created>1768017803307</created>
      <option name="number" value="00046" />
      <option name="presentableId" value="LOCAL-00046" />
      <option name="project" value="LOCAL" />
      <updated>1768017803307</updated>
    </task>
    <task id="LOCAL-00047" summary="refactor(ai): modularize prompt construction and history formatting&#10;- Added `format_history` to process recent chat context (last 10 messages).&#10;- Refactored `build_chat_messages` to accept pre-fetched profile and workout data.&#10;- Implemented `model_dump(include=...)` for cleaner data extraction from models.&#10;- Improved prompt structure by separating System Persona and User context.">
      <option name="closed" value="true" />
      <created>1768206857680</created>
      <option name="number" value="00047" />
      <option name="presentableId" value="LOCAL-00047" />
      <option name="project" value="LOCAL" />
      <updated>1768206857680</updated>
    </task>
    <option name="localTasksCounter" value="48" />
    <servers />
  </component>
  <component name="Vcs.Log.Tabs.Properties">
    <option name="TAB_STATES">
      <map>
        <entry key="MAIN">
          <value>
            <State />
          </value>
        </entry>
      </map>
    </option>
  </component>
  <component name="VcsManagerConfiguration">
    <option name="ADD_EXTERNAL_FILES_SILENTLY" value="true" />
    <MESSAGE value="Create template profile.html" />
    <MESSAGE value="add Get route for profile creation form" />
    <MESSAGE value="Fixed parse_csv_to_workout to correctly associate Workout with UploadedFile: removed file_path from Relationship" />
    <MESSAGE value="Feature: Add workouts list page with pagination&#10;&#10;- Created GET /workouts with pagination support (10 workouts per page)&#10;- Added a total page count&#10;- Implemented sorting by ID (newest on top)&#10;- Created a workouts.html template with a workout table&#10;- Added navigation between pages (Previous/Next)" />
    <MESSAGE value="fix: handle missing heartrate and cadence in CSV import&#10;&#10;- Add get_metric_or_none() helper function&#10;- Make heartrate and cadence fields optional&#10;- Prevent crashes on incomplete workout data" />
    <MESSAGE value="feat: add workout detail page&#10;&#10;- Created GET /workouts/{workout_id} for detailed view of workout&#10;- Added workout_detail.html template.&#10;- All metrics are shown: power, heart rate, cadence, speed, calories&#10;- Missing data handling (heart rate, cadence)&#10;- Back to list navigation added" />
    <MESSAGE value="Progress: Created the OllamaService class, added asyncgenerate() for Ollama LLM integration.&#10;&#10;- Implemented the asynchronous generate() function for communicating with the local LLM via the Ollama API.&#10;- Handling connection and timeout errors." />
    <MESSAGE value="Feature: Add format_workouts() for AI coach&#10;&#10;- Implemented the format_workouts() function for converting workouts to text.&#10;- Format: compact strings with key metrics (distance, TSS, power, NP, IF).&#10;- Conditional display of heart rate and cadence (if data is available).&#10;- The user can select the number of workouts to analyze." />
    <MESSAGE value="feat: add OllamaService with AI coach integration&#10;&#10;- Implement generate() for LLM communication&#10;- Add format_workouts() for workout formatting&#10;- Add get_training_advice() to get AI recommendations&#10;- Handle connection errors and timeouts" />
    <MESSAGE value="feat: implement AI coach UI&#10;&#10;- Add GET /coach and POST /coach/advice routes&#10;- Add coach.html form and advice.html result page&#10;- User can select number of workouts to analyze&#10;- Call OllamaService to generate recommendations" />
    <MESSAGE value="feat: add AI coach with Ollama integration&#10;&#10;- Implement OllamaService (generate, format_workouts, get_training_advice)&#10;- Add GET /coach and POST /coach/advice routes&#10;- Create coach.html form and advice.html result page&#10;- User selects number of workouts to analyze (1-20)&#10;- Fixed stream mode issue (stream=false)" />
    <MESSAGE value="feat: add ChatMessage model and UserProfile relationship&#10;&#10;- Add ChatMessage model (user_id, role, content, created_at)&#10;- Update UserProfile with messages relationship (back_populates)&#10;- Prepare database schema for persistent AI chat history&#10;- Define foreign key constraints for user-message linking" />
    <MESSAGE value="feat: add chat method to OllamaService" />
    <MESSAGE value="feat: implement get_chat_response with full history context" />
    <MESSAGE value="refactor: GET/coach, preparation for creating an AI chat" />
    <MESSAGE value="feat: implement chat persistence with message history&#10;- Add POST /coach/chat route to handle user messages&#10;- Save user questions and AI responses to ChatMessage table&#10;- Update GET /coach to load chat history from database&#10;- Integrate OllamaService.get_chat_response for contextual replies&#10;- Use Post-Redirect-Get pattern to prevent form resubmission" />
    <MESSAGE value="feat: implement chat UI with message history and input form&#10;&#10;- Create app/templates/coach.html template&#10;- Implement Jinja2 loop for rendering chat history&#10;- Add HTML form for submitting user questions to /coach/chat" />
    <MESSAGE value="refactor(templates): extract base layout with navigation&#10;&#10;- Create app/templates/base.html with common structure and navigation&#10;- Update app/templates/coach.html to extend base.html&#10;- Fix JavaScript syntax for loading indicator in coach.html" />
    <MESSAGE value="refactor(templates): implement navigation in base layout&#10;&#10;- Update base.html with shared navigation&#10;- Update all templates to inherit from base" />
    <MESSAGE value="feat(ai): add system persona promt and create prompts directory&#10;&#10;-Created a dedicated directory for AI prompts and added the initial System_Persona.txt file to separate coaching logic from the application code." />
    <MESSAGE value="feat(ai): integrate dynamic system persona template&#10;-Added System_Persona.txt to separate coaching instructions from the logic.&#10;-Implemented _load_system_prompt in OllamaService to read the template from the file system.&#10;-Updated __init__ to cache the system persona template at startup for better performance.&#10;-Refactored get_chat_response to inject dynamic values (like sport type) into the system message." />
    <MESSAGE value="feat(db): implement AthleteProfile and establish 1-to-1 relationship&#10;-Created AthleteProfile table to store dynamic fitness metrics separately from core user data.&#10;-Linked AthleteProfile to UserProfile using a shared primary key (Foreign Key).&#10;-Updated UserProfile to include a relationship back to AthleteProfile." />
    <MESSAGE value="feat(ai): implement modular prompts and simplify athlete profile&#10;- Created User_Profile.txt and Current_Context.txt for modular prompt engineering.&#10;- Refactored AthleteProfile in models.py to focus on core metrics (FTP, weight, limitations).&#10;- Synchronized template placeholders with database field names for automated formatting." />
    <MESSAGE value="feat(ai): refactor prompt loading into a reusable static method&#10;- Unified prompt loading logic into a single static method `_load_prompt`.&#10;- Updated OllamaService to load multiple template parts: System Persona, User Profile, and Current Context.&#10;- Prepared the infrastructure for dynamic prompt assembly using athlete data from the database." />
    <MESSAGE value="refactor(ai): modularize prompt construction and history formatting&#10;- Added `format_history` to process recent chat context (last 10 messages).&#10;- Refactored `build_chat_messages` to accept pre-fetched profile and workout data.&#10;- Implemented `model_dump(include=...)` for cleaner data extraction from models.&#10;- Improved prompt structure by separating System Persona and User context." />
    <option name="LAST_COMMIT_MESSAGE" value="refactor(ai): modularize prompt construction and history formatting&#10;- Added `format_history` to process recent chat context (last 10 messages).&#10;- Refactored `build_chat_messages` to accept pre-fetched profile and workout data.&#10;- Implemented `model_dump(include=...)` for cleaner data extraction from models.&#10;- Improved prompt structure by separating System Persona and User context." />
  </component>
</project>